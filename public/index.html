<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title>èŠ±å°å¯’ (Hua Xiaohan) - Bitcoin Ahr999 & Crypto Tools</title>
    <meta name="description" content="èŠ±å°å¯’ (Hua Xiaohan) is a professional crypto investment tool providing real-time Ahr999 index, DCA calculator, and MVRV-based sell indicators for Bitcoin.">
    <meta name="keywords" content="èŠ±å°å¯’, Hua Xiaohan, Ahr999, Bitcoin DCA, Crypto Tools, MVRV Z-Score, å®šæŠ•è®¡ç®—å™¨, æ¯”ç‰¹å¸æŠ„åº•">
    <meta name="author" content="Hua Xiaohan Team">
    <meta name="robots" content="index, follow">

    <style>
        :root { --bg: #f8f9fa; --card-bg: #ffffff; --text: #2c3e50; --accent: #3498db; --red: #e74c3c; --green: #2ecc71; --orange: #f39c12; }
        body.dark-mode { --bg: #121212; --card-bg: #1e1e1e; --text: #ecf0f1; --accent: #5dade2; --red: #ff6b6b; --green: #58d68d; --orange: #f5b041; }
        
        body { font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; padding: 20px; max-width: 640px; margin: 0 auto; background-color: var(--bg); color: var(--text); transition: 0.3s; line-height: 1.6; }
        
        /* é¡¶éƒ¨å¯¼èˆª */
        .nav-bar { display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px; }
        .logo { font-size: 20px; font-weight: bold; display: flex; align-items: center; gap: 8px; }
        .controls { display: flex; gap: 10px; }
        select { padding: 5px; border-radius: 5px; border: 1px solid #ccc; background: var(--card-bg); color: var(--text); }
        
        /* å¡ç‰‡é€šç”¨ */
        .card { background: var(--card-bg); border-radius: 16px; padding: 24px; margin-bottom: 20px; box-shadow: 0 4px 20px rgba(0,0,0,0.04); border: 1px solid rgba(0,0,0,0.05); }
        
        /* ä»·æ ¼å¤§å­— */
        .price-display { text-align: center; margin-bottom: 20px; }
        .price-val { font-size: 42px; font-weight: 800; letter-spacing: -1px; margin: 5px 0; }
        
        /* æŒ‡æ ‡åŒæ  */
        .indicators-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
        .ind-box { background: rgba(0,0,0,0.03); padding: 15px; border-radius: 12px; text-align: center; }
        .ind-val { font-size: 22px; font-weight: bold; display: block; margin-top: 5px; }
        
        /* çŠ¶æ€æ¡ */
        .status-bar { margin-top: 15px; padding: 10px; border-radius: 8px; text-align: center; font-weight: bold; background: rgba(0,0,0,0.03); font-size: 14px; }
        
        /* é¢œè‰²å®šä¹‰ */
        .c-green { color: var(--green); }
        .c-red { color: var(--red); }
        .c-orange { color: var(--orange); }
        
        /* è®¡ç®—å™¨ */
        .calc-box { border-left: 4px solid var(--accent); }
        .input-row { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; }
        input[type="number"] { width: 80px; padding: 8px; border-radius: 6px; border: 1px solid #ccc; text-align: center; font-size: 16px; background: var(--card-bg); color: var(--text); }
        
        .result-row { display: flex; justify-content: space-between; align-items: flex-end; padding-top: 15px; border-top: 1px dashed rgba(0,0,0,0.1); }
        .final-amt { font-size: 28px; font-weight: bold; color: var(--accent); }
        
        /* åº•éƒ¨ */
        .footer { text-align: center; margin-top: 40px; font-size: 12px; opacity: 0.6; padding-bottom: 20px; }
        .disclaimer { margin-top: 20px; padding: 15px; background: rgba(0,0,0,0.02); border-radius: 8px; text-align: left; font-size: 11px; line-height: 1.5; border: 1px solid rgba(0,0,0,0.05); }
        
        button.icon-btn { background: none; border: 1px solid rgba(0,0,0,0.1); border-radius: 50%; width: 32px; height: 32px; cursor: pointer; color: var(--text); }
    </style>
</head>
<body>

    <div class="nav-bar">
        <div class="logo">ğŸŒ¸ <span data-i18n="title">Hua Xiaohan</span></div>
        <div class="controls">
            <select id="lang-select" onchange="changeLang()">
                <option value="zh">ğŸ‡¨ğŸ‡³ ä¸­æ–‡</option>
                <option value="zh-TW">ğŸ‡¹ğŸ‡¼ ç¹é«”</option>
                <option value="en">ğŸ‡ºğŸ‡¸ English</option>
                <option value="ja">ğŸ‡¯ğŸ‡µ æ—¥æœ¬èª</option>
                <option value="ko">ğŸ‡°ğŸ‡· í•œêµ­ì–´</option>
                <option value="es">ğŸ‡ªğŸ‡¸ EspaÃ±ol</option>
                <option value="ru">ğŸ‡·ğŸ‡º Ğ ÑƒÑÑĞºĞ¸Ğ¹</option>
                <option value="de">ğŸ‡©ğŸ‡ª Deutsch</option>
                <option value="fr">ğŸ‡«ğŸ‡· FranÃ§ais</option>
                <option value="vi">ğŸ‡»ğŸ‡³ Tiáº¿ng Viá»‡t</option>
            </select>
            <button class="icon-btn" onclick="toggleTheme()">ğŸŒ—</button>
        </div>
    </div>

    <div class="card">
        <div class="price-display">
            <span class="label" data-i18n="price">Bitcoin Price</span>
            <div id="price" class="price-val">...</div>
            <div id="update-time" style="font-size:12px; opacity:0.5;"></div>
        </div>
        
        <div class="indicators-grid">
            <div class="ind-box">
                <span class="label" data-i18n="ahr_label" style="font-size:12px;">Ahr999</span>
                <span id="ahr-val" class="ind-val">--</span>
                <div id="buy-status" style="font-size:11px; margin-top:5px;">--</div>
            </div>
            <div class="ind-box">
                <span class="label" data-i18n="mayer_label" style="font-size:12px;">Sell Indicator</span>
                <span id="mayer-val" class="ind-val">--</span>
                <div id="sell-status" style="font-size:11px; margin-top:5px;">--</div>
            </div>
        </div>
    </div>

    <div class="card calc-box">
        <h3 data-i18n="calc_title" style="margin-top:0;">Calculator</h3>
        
        <div class="input-row">
            <span data-i18n="base_amt">Base Amount</span>
            <input type="number" id="base-amount" value="100" oninput="calculate()">
        </div>

        <div class="result-row">
            <div>
                <span id="multiplier-tag" style="background:var(--accent); color:#fff; padding:2px 8px; border-radius:4px; font-size:12px;">x0</span>
            </div>
            <div style="text-align: right;">
                <span data-i18n="buy_this_round" style="display:block; font-size:12px;">Invest Today</span>
                <span id="final-amount" class="final-amt">$0</span>
            </div>
        </div>
    </div>

    <div style="text-align: center;">
        <button onclick="fetchData()" style="padding:10px 20px; background:var(--text); color:var(--bg); border:none; border-radius:20px; cursor:pointer;" data-i18n="refresh">Refresh</button>
    </div>

    <div class="footer">
        <div class="disclaimer">
            <strong data-i18n="disclaimer_title">Disclaimer</strong><br>
            <span data-i18n="disclaimer_text">...</span>
        </div>
        <p>Â© 2025 Hua Xiaohan (èŠ±å°å¯’). Powered by CoinGecko.</p>
    </div>

    <script src="common.js"></script>
    <script>
        let currentMultiplier = 0;

        async function fetchData() {
            const priceEl = document.getElementById('price');
            priceEl.style.opacity = '0.5';
            
            try {
                const res = await fetch('/api/get-ahr999');
                const data = await res.json();
                
                // 1. åŸºç¡€æ•°æ®
                priceEl.innerText = '$' + data.price.toLocaleString();
                document.getElementById('ahr-val').innerText = data.ahr999;
                document.getElementById('mayer-val').innerText = data.mayer;
                
                // 2. è·å–å½“å‰è¯­è¨€åŒ…
                const t = translations[currentLang] || translations['en'];

                // 3. ä¹°å…¥çŠ¶æ€ç¿»è¯‘
                const buyKey = 'status_' + data.buySignal;
                document.getElementById('buy-status').innerText = t[buyKey] || data.buySignal;
                
                // 4. å–å‡ºçŠ¶æ€ç¿»è¯‘
                const sellKey = 'sell_' + data.sellSignal;
                const sellEl = document.getElementById('sell-status');
                sellEl.innerText = t[sellKey] || data.sellSignal;
                
                // 5. é¢œè‰²é€»è¾‘
                // Ahr é¢œè‰²
                const ahrVal = parseFloat(data.ahr999);
                const ahrEl = document.getElementById('ahr-val');
                if(ahrVal < 0.45) ahrEl.className = 'ind-val c-green';
                else if(ahrVal > 1.2) ahrEl.className = 'ind-val c-red';
                else ahrEl.className = 'ind-val';

                // Mayer (Sell) é¢œè‰²
                const mayerVal = parseFloat(data.mayer);
                const mayerEl = document.getElementById('mayer-val');
                if(mayerVal > 2.4) { mayerEl.className = 'ind-val c-red'; sellEl.className = 'c-red'; }
                else if(mayerVal > 1.8) { mayerEl.className = 'ind-val c-orange'; sellEl.className = 'c-orange'; }
                else { mayerEl.className = 'ind-val c-green'; sellEl.className = 'c-green'; }

                // 6. å­˜å‚¨å€æ•°å¹¶è®¡ç®—
                currentMultiplier = data.multiplier;
                document.getElementById('multiplier-tag').innerText = 'x ' + currentMultiplier;
                calculate();

            } catch (err) {
                console.error(err);
                priceEl.innerText = "Error";
            } finally {
                priceEl.style.opacity = '1';
            }
        }

        function calculate() {
            const base = document.getElementById('base-amount').value;
            const total = base * currentMultiplier;
            const finalEl = document.getElementById('final-amount');
            
            finalEl.innerText = '$' + total.toLocaleString();
            
            if(currentMultiplier === 0) {
                finalEl.style.color = '#999';
            } else {
                finalEl.style.color = 'var(--accent)';
            }
        }

        // é¡µé¢åŠ è½½åè‡ªåŠ¨æŠ“å–
        setTimeout(fetchData, 500);
    </script>
</body>
</html>
